//@ui5-bundle com/binlah/sap/btp/cpi/messageviewer/Component-preload.js
sap.ui.predefine("com/binlah/sap/btp/cpi/messageviewer/Component", ["sap/fe/core/AppComponent"],function(e){"use strict";return e.extend("com.binlah.sap.btp.cpi.messageviewer.Component",{metadata:{manifest:"json"}})});
sap.ui.predefine("com/binlah/sap/btp/cpi/messageviewer/ext/controller/PayloadViewer.controller", ["sap/ui/core/mvc/ControllerExtension","sap/ui/model/json/JSONModel","sap/m/MessageToast"],function(e,o,t){"use strict";return e.extend("com.binlah.sap.btp.cpi.messageviewer.ext.controller.PayloadViewer",{metadata:{methods:{}},override:{onInit:function(){console.log("LoggingExtension initialized");const e=this.base.getExtensionAPI();console.log("oExtensionAPI:",e)},onAfterRendering:function(){console.log("LoggingExtension after rendering");var e=this.base.getExtensionAPI().getModel();console.log("oModel:",e)},onExit:function(){console.log("LoggingExtension destroyed")},routing:{onAfterBinding:async function(e){console.log("LoggingExtension onAfterBinding");if(!e)return;const t=e.getPath();if(t===this._lastPath)return;this._lastPath=t;if(!this.blobModel){this.blobModel=new o({payload:"",mimeType:""});this.base.getView().setModel(this.blobModel,"blobModel")}await this._loadBlob()}}},_loadBlob:async function(){try{console.log("LoggingExtension _loadBlob");const e=this.base.getView().getBindingContext();if(!e)return;const o=e.getObject();const t=encodeURIComponent(o.Id);const n=this.base.getExtensionAPI().getModel();console.log("oModel:",n);let s=n.getServiceUrl?n.getServiceUrl():n.sServiceUrl||"";console.log("sServiceUrl:",s);if(!s.endsWith("/")){s+="/"}console.log("sServiceUrl:",s);const i=`${s}MessageStoreEntries('${t}')/blob`;console.log("sUrl:",i);const l=await fetch(i,{headers:{Accept:"*/*"},credentials:"include"});if(!l.ok)throw new Error(`${l.status} ${l.statusText}`);const a=(l.headers.get("content-type")||"").toLowerCase();console.log("Fetched blob content-type:",a);let c="";if(a.includes("application/json")){const e=await l.json();c=JSON.stringify(e,null,2)}else if(a.includes("xml")||a.includes("text/")){c=await l.text()}else{const e=await l.arrayBuffer();try{c=new TextDecoder("utf-8").decode(e)}catch(e){c="[binary content not displayable]"}}console.log("Fetched blob:",l);console.log("Fetched blob content:",c);this.blobModel.setData({payload:c,mimeType:a})}catch(e){this.blobModel.setData({payload:`[ERROR]\n${e.message||e}`,mimeType:""})}}})});
sap.ui.predefine("com/binlah/sap/btp/cpi/messageviewer/ext/fragment/PayloadViewerHandler", [],function(){"use strict";return{onBeautifyPressed:function(e){var t=e.getSource().getParent();var o=t.getParent();var n=o.getItems().find(function(e){return e&&e.isA&&e.isA("sap.ui.codeeditor.CodeEditor")});if(!n){var r=o.getId()+"--payloadEditor";n=sap.ui.getCore().byId(r);console.log("oEditor:"+n)}if(n&&n.prettyPrint){console.log("Beautify pressed; pretty-printing payload.");n.prettyPrint()}else{console.warn("CodeEditor not found or prettyPrint() not available.")}},onDownloadPressed:function(e){const t=e.getSource();const o=t.getModel("blobModel");const n=o?.getProperty("/payload")??"";if(!n){MessageToast.show("Nothing to download");return}const r=t.getBindingContext()?.getObject?.();const s=r?.MessageStoreId||"payload";const d=(o?.getProperty("/mimeType")||o?.getProperty("/editorType")||o?.getProperty("/contentType")||"").toLowerCase();console.log("mimeOrType:",d);const i=d.includes("json")?"json":d.includes("xml")?"xml":"txt";const a=`${s}.${i}`;const c=new Blob([n],{type:"text/plain;charset=utf-8"});const l=document.createElement("a");l.href=URL.createObjectURL(c);l.download=a;document.body.appendChild(l);l.click();document.body.removeChild(l);URL.revokeObjectURL(l.href)}}});
sap.ui.require.preload({
	"com/binlah/sap/btp/cpi/messageviewer/ext/fragment/PayloadViewer.fragment.xml":'<core:FragmentDefinition\n  xmlns="sap.m"\n  xmlns:core="sap.ui.core"\n  xmlns:code="sap.ui.codeeditor"><VBox id="vbox" width="100%" renderType="Bare" \n    core:require="{ handler: \'com/binlah/sap/btp/cpi/messageviewer/ext/fragment/PayloadViewerHandler\' }"><Toolbar id="toolbar"><Button id="beautifyButton" text="Beautify" press="handler.onBeautifyPressed"/><Button id="downloadButton" text="Download" press="handler.onDownloadPressed"/></Toolbar><code:CodeEditor \n      id="payloadEditor" \n      type="{blobModel>/editorType}" \n      value="{blobModel>/payload}" \n      editable="false" \n      height="24rem"/></VBox></core:FragmentDefinition>\n',
	"com/binlah/sap/btp/cpi/messageviewer/i18n/i18n.properties":'# This is the resource bundle for com.binlah.sap.btp.cpi.messageviewer\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=CPI MessageViewer\n\n#YDES: Application description\nappDescription=CPI MessageViewer application.\n\n#XFLD,54\nMessageViewer-display.flpTitle=CPI Message Viewer\n\n#XTIT: Custom section title\npayloadViewer=Payload Viewer\n',
	"com/binlah/sap/btp/cpi/messageviewer/manifest.json":'{"_version":"1.60.0","sap.app":{"id":"com.binlah.sap.btp.cpi.messageviewer","type":"application","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""]},"applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:lrop","version":"1.19.0","toolsId":"0be2d84a-39f3-4a8e-a458-ec7dd0d1ea37"},"dataSources":{"mainService":{"uri":"odata/v4/remote/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}},"crossNavigation":{"inbounds":{"MessageViewer-display":{"semanticObject":"MessageViewer","action":"display","title":"{{MessageViewer-display.flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.120.38","libs":{"sap.m":{},"sap.ui.core":{},"sap.fe.templates":{},"sap.f":{},"sap.ui.codeeditor":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"com.binlah.sap.btp.cpi.messageviewer.i18n.i18n","supportedLocales":[""]}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}},"@i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties","settings":{"supportedLocales":[""]}}},"resources":{"css":[]},"routing":{"config":{"flexibleColumnLayout":{"defaultTwoColumnLayoutType":"TwoColumnsMidExpanded","defaultThreeColumnLayoutType":"ThreeColumnsEndExpanded"},"routerClass":"sap.f.routing.Router"},"routes":[{"pattern":":?query:","name":"MessageProcessingLogsList","target":["MessageProcessingLogsList"]},{"pattern":"MessageProcessingLogs({key}):?query:","name":"MessageProcessingLogsObjectPage","target":["MessageProcessingLogsList","MessageProcessingLogsObjectPage"]},{"pattern":"MessageProcessingLogs({key})/MessageStoreEntries({key2}):?query:","name":"MessageStoreEntriesObjectPage","target":["MessageProcessingLogsList","MessageProcessingLogsObjectPage","MessageStoreEntriesObjectPage"]}],"targets":{"MessageProcessingLogsList":{"type":"Component","id":"MessageProcessingLogsList","name":"sap.fe.templates.ListReport","options":{"settings":{"contextPath":"/MessageProcessingLogs","variantManagement":"Page","navigation":{"MessageProcessingLogs":{"detail":{"route":"MessageProcessingLogsObjectPage"}}},"controlConfiguration":{"@com.sap.vocabularies.UI.v1.LineItem":{"tableSettings":{"type":"ResponsiveTable"}}}}},"controlAggregation":"beginColumnPages","contextPattern":""},"MessageProcessingLogsObjectPage":{"type":"Component","id":"MessageProcessingLogsObjectPage","name":"sap.fe.templates.ObjectPage","options":{"settings":{"editableHeaderContent":false,"contextPath":"/MessageProcessingLogs","navigation":{"MessageStoreEntries":{"detail":{"route":"MessageStoreEntriesObjectPage"}}},"controlConfiguration":{"CustomHeaderProperties/@com.sap.vocabularies.UI.v1.LineItem#CustomerHeaders":{"tableSettings":{"quickVariantSelection":{"showCounts":false},"personalization":{"filter":false},"enableExport":false,"showSearch":false}},"MessageStoreEntries/@com.sap.vocabularies.UI.v1.LineItem#MessageStoreEntries":{"tableSettings":{"personalization":{"filter":false,"sort":false},"quickVariantSelection":{"showCounts":false},"enableExport":false,"showSearch":false}}}}},"controlAggregation":"midColumnPages","contextPattern":"/MessageProcessingLogs({key})"},"MessageStoreEntriesObjectPage":{"type":"Component","id":"MessageStoreEntriesObjectPage","name":"sap.fe.templates.ObjectPage","options":{"settings":{"editableHeaderContent":false,"contextPath":"/MessageProcessingLogs/MessageStoreEntries","content":{"body":{"sections":{"PayloadViewer":{"template":"com.binlah.sap.btp.cpi.messageviewer.ext.fragment.PayloadViewer","title":"{i18n>payloadViewer}"}}}}}},"controlAggregation":"endColumnPages","contextPattern":"/MessageProcessingLogs({key})/MessageStoreEntries({key2})"}}},"extends":{"extensions":{"sap.ui.controllerExtensions":{"sap.fe.templates.ObjectPage.ObjectPageController#com.binlah.sap.btp.cpi.messageviewer::MessageStoreEntriesObjectPage":{"controllerName":"com.binlah.sap.btp.cpi.messageviewer.ext.controller.PayloadViewer"}}}},"rootView":{"viewName":"sap.fe.templates.RootContainer.view.Fcl","type":"XML","async":true,"id":"appRootView"},"flexBundle":false},"sap.fiori":{"registrationIds":[],"archeType":"transactional"},"sap.cloud":{"public":true,"service":"cpimessageviewer.service"}}'
});
//# sourceMappingURL=Component-preload.js.map
